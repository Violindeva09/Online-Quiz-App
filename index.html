<script>
  const quizData = [
    {
      question: "What does HTML stand for?",
      options: [
        "HyperText Markup Language",
        "Hyper Tool Markup Language",
        "Hyperlinks and Text Markup Language",
        "Home Tool Markup Language"
      ],
      answer: 0
    },
    {
      question: "Which language runs in a web browser?",
      options: ["Java", "C", "Python", "JavaScript"],
      answer: 3
    },
    {
      question: "What does CSS stand for?",
      options: [
        "Color Style Sheets",
        "Cascading Style Sheets",
        "Creative Style System",
        "Computer Style Sheets"
      ],
      answer: 1
    },
    {
      question: "Inside which HTML element do we put JavaScript?",
      options: ["<script>", "<javascript>", "<js>", "<code>"],
      answer: 0
    }
  ];

  let currentQuestion = 0;
  let score = 0;
  let selectedAnswers = [];
  let skippedCount = 0;
  let timer;
  let timeLeft = 10;

  const questionText = document.getElementById("questionText");
  const optionsList = document.getElementById("optionsList");
  const nextBtn = document.getElementById("nextBtn");
  const resultBox = document.getElementById("result");
  const highScoreBox = document.getElementById("highScore");
  const reviewBox = document.getElementById("review");
  const timerBox = document.getElementById("timer");

  function startTimer() {
    timeLeft = 10;
    timerBox.textContent = `‚è≥ Time Left: ${timeLeft}s`;
    timer = setInterval(() => {
      timeLeft--;
      timerBox.textContent = `‚è≥ Time Left: ${timeLeft}s`;
      if (timeLeft === 0) {
        clearInterval(timer);
        autoSubmit();
      }
    }, 1000);
  }

  function autoSubmit() {
    const correctIndex = quizData[currentQuestion].answer;
    const allOptions = document.querySelectorAll(".options li");

    allOptions.forEach((li, i) => {
      li.classList.add(i === correctIndex ? "correct" : "wrong");
      li.style.pointerEvents = "none";
    });

    selectedAnswers.push(null); // mark as skipped
    skippedCount++;
    nextBtn.style.display = "inline-block";
  }

  function loadQuestion() {
    clearInterval(timer);
    startTimer();

    const q = quizData[currentQuestion];
    questionText.textContent = q.question;
    optionsList.innerHTML = "";
    resultBox.textContent = "";
    reviewBox.innerHTML = "";

    q.options.forEach((option, index) => {
      const li = document.createElement("li");
      li.textContent = option;
      li.addEventListener("click", () => selectAnswer(li, index));
      optionsList.appendChild(li);
    });

    nextBtn.style.display = "none";
  }

  function selectAnswer(selectedLi, index) {
    clearInterval(timer);

    const correctIndex = quizData[currentQuestion].answer;
    const allOptions = document.querySelectorAll(".options li");

    allOptions.forEach((li, i) => {
      li.classList.add(i === correctIndex ? "correct" : "wrong");
      li.style.pointerEvents = "none";
    });

    selectedAnswers.push(index);
    if (index === correctIndex) {
      score++;
    }

    nextBtn.style.display = "inline-block";
  }

  nextBtn.addEventListener("click", () => {
    currentQuestion++;
    if (currentQuestion < quizData.length) {
      loadQuestion();
    } else {
      showResult();
    }
  });

  function showResult() {
    questionText.style.display = "none";
    optionsList.style.display = "none";
    nextBtn.style.display = "none";
    timerBox.style.display = "none";

    const total = quizData.length;
    const wrong = total - score - skippedCount;

    resultBox.innerHTML = `
      ‚úÖ Correct: ${score}<br>
      ‚ùå Wrong: ${wrong}<br>
      ‚è≥ Skipped: ${skippedCount}<br><br>
      üßæ Total Score: ${score} / ${total}
    `;

    // Add performance message
    let message = "";
    if (score === total) {
      message = "üéâ Excellent! You nailed it!";
    } else if (score >= total / 2) {
      message = "üôÇ Good Job! Keep practicing.";
    } else {
      message = "üòê Needs Improvement. Try again!";
    }

    resultBox.innerHTML += `<br><strong>${message}</strong>`;

    // High score logic
    const storedHighScore = localStorage.getItem("highScore") || 0;
    if (score > storedHighScore) {
      localStorage.setItem("highScore", score);
      highScoreBox.textContent = `üèÜ New High Score: ${score}`;
    } else {
      highScoreBox.textContent = `High Score: ${storedHighScore}`;
    }

    showReview();
  }

  function showReview() {
    reviewBox.innerHTML = `<h3>üìò Answer Review:</h3>`;
    quizData.forEach((q, i) => {
      const userAnswer = selectedAnswers[i];
      const isCorrect = userAnswer === q.answer;

      const div = document.createElement("div");
      div.className = "review-item";
      div.innerHTML = `
        <strong>Q${i + 1}:</strong> ${q.question}<br>
        ‚úÖ Correct Answer: <span class="correct-answer">${q.options[q.answer]}</span><br>
        üßç Your Answer: ${
          userAnswer === null
            ? "<em>Skipped</em>"
            : `<span class="${isCorrect ? 'correct-answer' : 'wrong-answer'}">${q.options[userAnswer]}</span>`
        }
      `;
      reviewBox.appendChild(div);
    });
  }

  loadQuestion();
</script>
